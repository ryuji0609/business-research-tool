<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proposal Pro | ææ¡ˆæ–‡ä½œæˆã‚·ãƒ¼ãƒˆ</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Outfit:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --blue: #0d47a1;
            --blue-light: #4facfe;
            --green: #06c755;
            --bg: #f0f4fd;
            --card: #ffffff;
            --text: #1a2b4c;
            --sub: #636e72;
            --border: #e2e8f0;
            --shadow: 0 4px 20px rgba(13, 71, 161, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        nav {
            background: linear-gradient(135deg, #0d47a1, #1565c0);
            color: white;
            padding: 1rem 5%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
        }

        .nav-logo {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 1.15rem;
            letter-spacing: 0.02em;
        }

        .nav-sub {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-left: 0.5rem;
            font-weight: 400;
        }

        .container {
            flex: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 5%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
        }

        @media(max-width:860px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .card h3 {
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 1.2rem;
            color: var(--blue);
            border-bottom: 2px solid var(--bg);
            padding-bottom: 0.6rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .form-group {
            margin-bottom: 1.1rem;
        }

        label {
            display: block;
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--sub);
            margin-bottom: 0.3rem;
        }

        .label-hint {
            font-weight: 400;
            color: #a0aec0;
            font-size: 0.78rem;
        }

        input,
        textarea {
            width: 100%;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            padding: 0.7rem 0.9rem;
            font-size: 0.92rem;
            font-family: 'Noto Sans JP', sans-serif;
            transition: all 0.2s;
            background: #fafafa;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--blue-light);
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            width: 100%;
            padding: 0.9rem;
            border-radius: 10px;
            border: none;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            background: linear-gradient(135deg, #0d47a1, #1976d2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 71, 161, 0.25);
        }

        .btn-outline {
            background: transparent;
            color: var(--blue);
            border: 2px solid var(--blue);
            padding: 0.4rem 0.8rem;
            width: auto;
            font-size: 0.82rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-outline:hover {
            background: var(--blue);
            color: white;
        }

        /* Output */
        .output-area {
            background: #f8fafc;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 400px;
            font-size: 0.92rem;
            line-height: 1.8;
            overflow-y: auto;
            max-height: 75vh;
            white-space: pre-wrap;
            flex: 1;
        }

        .output-area h2 {
            font-size: 1.1rem;
            color: var(--blue);
            margin: 1.2em 0 0.4em;
            font-weight: 700;
        }

        .output-area .section {
            margin-bottom: 1.5em;
        }

        .output-area .section-title {
            font-weight: 700;
            color: var(--blue);
            font-size: 0.95rem;
            border-left: 3px solid var(--blue-light);
            padding-left: 0.6rem;
            margin-bottom: 0.5em;
        }

        .output-area p {
            margin-bottom: 0.6em;
        }

        .output-area ul {
            margin-left: 1.3em;
            margin-bottom: 0.8em;
        }

        .output-area li {
            margin-bottom: 0.3em;
        }

        .output-area .highlight {
            background: rgba(79, 172, 254, 0.08);
            border-radius: 6px;
            padding: 0.8rem 1rem;
            margin: 0.8em 0;
            border-left: 3px solid var(--blue-light);
        }

        .placeholder {
            color: var(--sub);
            text-align: center;
            padding-top: 3rem;
        }

        .placeholder span {
            font-size: 3rem;
            display: block;
            margin-bottom: 1rem;
        }

        /* History */
        .history-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 1rem;
        }

        .history-chip {
            background: rgba(6, 199, 85, 0.08);
            border: 1px solid rgba(6, 199, 85, 0.25);
            color: #059644;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.78rem;
            cursor: pointer;
            transition: all 0.15s;
            font-weight: 500;
        }

        .history-chip:hover {
            background: rgba(6, 199, 85, 0.15);
            transform: scale(1.03);
        }
    </style>
</head>

<body>

    <nav>
        <div class="nav-logo">ğŸ¯ Proposal Pro <span class="nav-sub">â€” ææ¡ˆæ–‡ãƒ¡ãƒ¼ã‚«ãƒ¼</span></div>
    </nav>

    <div class="container">
        <!-- Input -->
        <div class="card">
            <h3>ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±</h3>

            <div id="history-area" class="history-chips"></div>

            <div class="form-group">
                <label>ã‚ãªãŸã®åå‰ãƒ»å±‹å· <span class="label-hint">ï¼ˆææ¡ˆæ›¸ã®å·®å‡ºäººåï¼‰</span></label>
                <input type="text" id="my-name" placeholder="ä¾‹: Ryuji / ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ Ryuji">
            </div>
            <div class="form-group">
                <label>ç›¸æ‰‹ã®ä¼šç¤¾åãƒ»æ‹…å½“è€…å</label>
                <input type="text" id="client-name" placeholder="ä¾‹: æ ªå¼ä¼šç¤¾ã€‡ã€‡ ç”°ä¸­æ§˜">
            </div>
            <div class="form-group">
                <label>ç›¸æ‰‹ã®æ¥­ç¨®ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¡§å®¢</label>
                <input type="text" id="client-biz" placeholder="ä¾‹: ç¾å®¹å®¤ / ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¯40ä»£å¥³æ€§">
            </div>
            <div class="form-group">
                <label>ç›¸æ‰‹ã®èª²é¡Œãƒ»ä¾é ¼å†…å®¹</label>
                <textarea id="client-problem" rows="3" placeholder="ä¾‹: ãƒ›ãƒƒãƒˆãƒšãƒƒãƒ‘ãƒ¼ä¾å­˜ã®é›†å®¢ã‚’è„±å´ã—ãŸã„ã€‚è‡ªç¤¾ã§ãƒªã‚¹ãƒˆã‚’å–ã‚ŠãŸã„ã€‚"></textarea>
            </div>
            <div class="form-group">
                <label>ã‚ãªãŸã®ã‚¹ã‚­ãƒ«ãƒ»æä¾›ä¾¡å€¤</label>
                <textarea id="my-skills" rows="3" placeholder="ä¾‹: Lã‚¹ãƒ†ãƒƒãƒ—æ§‹ç¯‰ã€LPãƒ‡ã‚¶ã‚¤ãƒ³ã€SNSé‹ç”¨ã€‚ãƒãƒ¼ã‚±ç›®ç·šã§ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¾—æ„ã€‚"></textarea>
            </div>
            <div class="form-group">
                <label>ææ¡ˆã—ãŸã„å…·ä½“çš„ãªæ–½ç­– <span class="label-hint">ï¼ˆè¤‡æ•°OKï¼‰</span></label>
                <textarea id="my-plan" rows="3"
                    placeholder="ä¾‹: ã‚·ãƒ§ãƒ¼ãƒˆå‹•ç”»ã®ä½œæˆâ†’å„åª’ä½“ã§èªçŸ¥æ‹¡å¤§ã€LINEæ§‹ç¯‰â†’å—ã‘çš¿ä½œã‚Šã€LPåˆ¶ä½œâ†’ãƒªã‚¹ãƒˆã‚¤ãƒ³å¼·åŒ–"></textarea>
            </div>
            <div class="form-group">
                <label>ãã®ä»–ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆ <span class="label-hint">ï¼ˆä»»æ„ï¼‰</span></label>
                <textarea id="extra" rows="2" placeholder="ä¾‹: ãƒãƒ¼ãƒ ã«ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãƒ»ã‚»ãƒ¼ãƒ«ã‚¹ãƒ©ã‚¤ã‚¿ãƒ¼ãƒ»å‹•ç”»ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãŒã„ã‚‹ã€‚å®Ÿç¸¾URLç­‰ã€‚"></textarea>
            </div>

            <button class="btn" onclick="generate()">ğŸ“„ ææ¡ˆæ›¸ã‚’ç”Ÿæˆ</button>
        </div>

        <!-- Output -->
        <div class="card" style="display:flex; flex-direction:column;">
            <h3>
                <span>ğŸ“„ ææ¡ˆæ›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                <div style="display:flex; gap:6px;">
                    <button class="btn-outline" onclick="copyText()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    <button class="btn-outline" onclick="printProposal()">ğŸ–¨ å°åˆ·</button>
                </div>
            </h3>
            <div id="output" class="output-area">
                <div class="placeholder">
                    <span>ğŸ“</span>
                    å·¦å´ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã€Œç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€<br>
                    ãƒ—ãƒ­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆã«æ²¿ã£ãŸ<br>
                    ææ¡ˆæ›¸ãŒè‡ªå‹•ã§çµ„ã¿ä¸ŠãŒã‚Šã¾ã™ã€‚<br><br>
                    <span style="font-size:0.85rem; color:var(--sub);">â€» APIã‚­ãƒ¼ä¸è¦ã€‚ã™ã¹ã¦ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Œçµã—ã¾ã™ã€‚</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== STORAGE =====
        const HISTORY_KEY = 'proposal_pro_history';
        function getHistory() { return JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); }
        function saveToHistory(data) {
            let h = getHistory();
            h.unshift({ ...data, createdAt: new Date().toISOString() });
            if (h.length > 10) h = h.slice(0, 10);
            localStorage.setItem(HISTORY_KEY, JSON.stringify(h));
            renderHistory();
        }

        function renderHistory() {
            const area = document.getElementById('history-area');
            const h = getHistory();
            if (!h.length) { area.innerHTML = ''; return; }
            area.innerHTML = '<span style="font-size:0.78rem; color:var(--sub); font-weight:600; align-self:center;">æœ€è¿‘ï¼š</span>' +
                h.slice(0, 5).map((d, i) =>
                    `<div class="history-chip" onclick="loadHistory(${i})">ğŸ• ${d.clientName || d.clientBiz || 'ææ¡ˆ' + (i + 1)}</div>`
                ).join('');
        }

        function loadHistory(idx) {
            const d = getHistory()[idx];
            if (!d) return;
            document.getElementById('my-name').value = d.myName || '';
            document.getElementById('client-name').value = d.clientName || '';
            document.getElementById('client-biz').value = d.clientBiz || '';
            document.getElementById('client-problem').value = d.clientProblem || '';
            document.getElementById('my-skills').value = d.mySkills || '';
            document.getElementById('my-plan').value = d.myPlan || '';
            document.getElementById('extra').value = d.extra || '';
        }

        // ===== GENERATE =====
        function generate() {
            const myName = document.getElementById('my-name').value.trim();
            const clientName = document.getElementById('client-name').value.trim();
            const clientBiz = document.getElementById('client-biz').value.trim();
            const clientProblem = document.getElementById('client-problem').value.trim();
            const mySkills = document.getElementById('my-skills').value.trim();
            const myPlan = document.getElementById('my-plan').value.trim();
            const extra = document.getElementById('extra').value.trim();

            if (!clientBiz || !clientProblem || !mySkills || !myPlan) {
                alert("æ¥­ç¨®ã€èª²é¡Œã€ã‚¹ã‚­ãƒ«ã€æ–½ç­–ã®4ã¤ã¯å¿…é ˆã§ã™ã€‚");
                return;
            }

            // Save
            saveToHistory({ myName, clientName, clientBiz, clientProblem, mySkills, myPlan, extra });

            // Build proposals items
            const plans = myPlan.split(/[ã€,\n]/).map(s => s.trim()).filter(Boolean);
            const skills = mySkills.split(/[ã€,\n]/).map(s => s.trim()).filter(Boolean);
            const today = new Date();
            const dateStr = `${today.getFullYear()}å¹´${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥`;

            const planItems = plans.map(p => {
                const parts = p.split(/[â†’â‡’ï¼š:]/).map(s => s.trim());
                if (parts.length >= 2) {
                    return `<li><strong>${parts[0]}</strong><br>â†’ ${parts.slice(1).join(' â†’ ')}</li>`;
                }
                return `<li>${p}</li>`;
            }).join('');

            const skillItems = skills.map(s => `<li>${s}</li>`).join('');

            const html = `
<div class="section">
  <h2>${clientName || 'ã€‡ã€‡'} æ§˜</h2>
  <p style="text-align:right; font-size:0.85rem; color:var(--sub);">${dateStr}</p>
  <p>ã¯ã˜ã‚ã¾ã—ã¦ã€${myName || 'ã€‡ã€‡'}ã¨ç”³ã—ã¾ã™ã€‚<br>
  ä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚</p>
  <p>ç§ã¯ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ¥­å‹™å…¨èˆ¬ã«æºã‚ã£ã¦ãŠã‚Šã€ä»Šå›${clientName || 'ã€‡ã€‡'}æ§˜ã®<strong>ã€Œ${clientProblem.split(/[ã€‚\n]/)[0]}ã€</strong>ã«é–¢ã—ã¦ã€ã”ææ¡ˆã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p>
</div>

<div class="section">
  <div class="section-title">ã€ç›®çš„ã€‘</div>
  <p>${clientName || 'ã€‡ã€‡'}æ§˜ã®<strong>èªçŸ¥æ‹¡å¤§</strong>ã¨<strong>å£²ä¸Šã®æœ€å¤§åŒ–</strong>ã‚’ç›®çš„ã¨ã—ã€${clientBiz}ã«ãŠã‘ã‚‹æœ€é©ãªãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚</p>
</div>

<div class="section">
  <div class="section-title">ã€ç¾çŠ¶ã®èª²é¡Œã¨æ‰€æ„Ÿã€‘</div>
  <div class="highlight">
    <p>${clientProblem}</p>
  </div>
  <p>ä¸Šè¨˜ã‚’è¸ã¾ãˆãŸç§ã®æ‰€æ„Ÿã¨ã—ã¦ã€${clientBiz}ã®å¸‚å ´ã«ãŠã„ã¦ã¯<strong>ã€ŒãŠå®¢æ§˜ãŒå¾¡ç¤¾ã‚’é¸ã¶æ˜ç¢ºãªç†ç”±ï¼ˆã‚³ãƒ³ã‚»ãƒ—ãƒˆï¼‰ã€</strong>ã‚’è¨€èªåŒ–ãƒ»å¯è¦–åŒ–ã—ã€ãã‚Œã‚’æ­£ã—ã„å°ç·šã§å±Šã‘ã‚‹ã“ã¨ãŒå£²ä¸Šã«ç›´çµã™ã‚‹ã¨è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚</p>
  <p>ç¾åœ¨ã®èª²é¡Œã¯ã€è¦‹è¾¼ã¿å®¢ã¨ã®æ¥ç‚¹ã‚„ãƒªã‚¹ãƒˆç²å¾—ã®ä»•çµ„ã¿ãŒæ•´ã£ã¦ã„ãªã„ç‚¹ã«ã‚ã‚‹ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ãŒã€é€†ã«è¨€ãˆã°<strong>ã“ã“ã‚’æ•´ãˆã‚‹ã ã‘ã§å¤§ããªã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆãŒè¦‹è¾¼ã‚ã¾ã™ã€‚</strong></p>
</div>

<div class="section">
  <div class="section-title">ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆææ¡ˆã€‘</div>
  <p>ä»¥ä¸‹ã®æ–½ç­–ã‚’é †ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€${clientName || 'ã€‡ã€‡'}æ§˜ã®èª²é¡Œã‚’è§£æ±ºã—ã¦ã¾ã„ã‚Šã¾ã™ã€‚</p>
  <ul>${planItems}</ul>
</div>

<div class="section">
  <div class="section-title">ã€ç§ã®æä¾›ã§ãã‚‹ä¾¡å€¤ã€‘</div>
  <ul>${skillItems}</ul>
  ${extra ? `<p>${extra}</p>` : ''}
  <p>å¿…è¦ã«å¿œã˜ã¦ã€LPã€Instagramã€åºƒå‘Šé‹ç”¨ãªã©<strong>å£²ä¸Šæœ€å¤§åŒ–ã®ãŸã‚ã«å¿…è¦ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯è¿½åŠ ã§ã”ææ¡ˆãƒ»ä½œæˆ</strong>ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p>
</div>

<div class="section">
  <div class="section-title">ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆç›®å®‰ï¼‰ã€‘</div>
  <ul>
    <li>ã”å¥‘ç´„å¾Œ â†’ ç¬¬1å›MTGï¼ˆãƒ’ã‚¢ãƒªãƒ³ã‚°ãƒ»æ–¹å‘æ€§ã™ã‚Šåˆã‚ã›ï¼‰</li>
    <li>1é€±é–“å¾Œ â†’ ç€æ‰‹é–‹å§‹</li>
    <li>1ãƒ¶æœˆå¾Œ â†’ é‹ç”¨ãƒ†ã‚¹ãƒˆãƒ»PDCAé–‹å§‹</li>
  </ul>
</div>

<div class="section">
  <div class="section-title">ã€æœ€å¾Œã«ã€‘</div>
  <p>${clientName || 'ã€‡ã€‡'}æ§˜ã®äº‹æ¥­å†…å®¹ã‚’æ‹è¦‹ã—ã€<strong>éå¸¸ã«é«˜ã„è¦ªå’Œæ€§ã‚’æ„Ÿã˜ãŸ</strong>ã‹ã‚‰ã“ãã€ä»Šå›ã”ææ¡ˆã‚’ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚</p>
  <p>ç§ã®ä»•äº‹ã¯å˜ãªã‚‹åˆ¶ä½œä»£è¡Œã§ã¯ãªãã€<strong>${clientName || 'ã€‡ã€‡'}æ§˜ã®ãƒ“ã‚¸ãƒã‚¹ã‚’ã€Œå‹ãŸã›ã‚‹ã€ã“ã¨</strong>ã§ã™ã€‚ãœã²äºŒäººä¸‰è„šã§å£²ä¸Šã‚¢ãƒƒãƒ—ã‚’å®Ÿç¾ã•ã›ã¦ãã ã•ã„ã€‚</p>
  <p>ã¾ãšã¯ãŠæ°—è»½ã«ãŠå£°ãŒã‘ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚</p>
  <br>
  <p style="text-align:right;">${myName || 'ã€‡ã€‡'}</p>
</div>`;

            document.getElementById('output').innerHTML = html;
            // store plain text for copy
            document.getElementById('output').dataset.raw = document.getElementById('output').innerText;
        }

        function copyText() {
            const raw = document.getElementById('output').innerText;
            if (!raw || raw.includes('å·¦å´ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦')) return alert("å…ˆã«ææ¡ˆæ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚");
            navigator.clipboard.writeText(raw).then(() => alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼")).catch(() => {
                // fallback
                const ta = document.createElement('textarea');
                ta.value = raw;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
            });
        }

        function printProposal() {
            const content = document.getElementById('output').innerHTML;
            if (content.includes('å·¦å´ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦')) return alert("å…ˆã«ææ¡ˆæ›¸ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚");
            const w = window.open('', '_blank');
            w.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>ææ¡ˆæ›¸</title>
      <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
      <style>
        body { font-family:'Noto Sans JP',sans-serif; padding:3rem; color:#1a2b4c; line-height:1.9; max-width:800px; margin:0 auto; }
        h2 { font-size:1.3rem; color:#0d47a1; border-bottom:2px solid #e2e8f0; padding-bottom:0.5rem; margin:1.5em 0 0.5em; }
        .section { margin-bottom:1.5em; }
        .section-title { font-weight:700; color:#0d47a1; font-size:1rem; border-left:3px solid #4facfe; padding-left:0.6rem; margin-bottom:0.5em; }
        .highlight { background:#f0f7ff; border-radius:6px; padding:0.8rem 1rem; margin:0.8em 0; border-left:3px solid #4facfe; }
        ul { margin-left:1.3em; } li { margin-bottom:0.3em; }
        @media print { body { padding:1rem; } }
      </style></head><body>${content}</body></html>`);
            w.document.close();
            setTimeout(() => w.print(), 400);
        }

        // Init
        renderHistory();
    </script>
</body>

</html>